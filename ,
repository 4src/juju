#!/usr/bin/env bash 
alias ,j="julia -O0 --compile=min --startup=no "
alias ,g="git commit -am saving; git push; git status"

jl2md() { gawk ' 
  function slurp(f,k) {
    if (! (f in TXT)) {
      while((getline  txt < f) > 0) { 
        if (sub(/^## /,"",txt)) 
           k=txt
        else {TXT[f][k] = TXT[f][k] "\n"txt}}
      close(f) }
    return TXT[f][k] }
  /^```julia/ { gsub(/[<>]/,"")  
                print("2```julia <"$2" "$3">")
                print(slurp($2,$3))
                print("3```")
                do { next } while ($0 !~ /```$/) }
              { print "1 "$0 }' $1
}
