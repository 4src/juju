#!/usr/bin/env bash 
alias ,j="julia -O0 --compile=min --startup=no "
alias ,g="git commit -am saving; git push; git status"

jl2md() { gawk ' 
  function slurp(f,k) {
    if (! (f in TXT)) {
      while((getline < f) > 0) {
        if ($0 ~ /^##/) key=$2
        TXT[f][k] = TXT[f][k] "\n" $0 }
      close(f) }
    return TXT[f][k] }
  /^```julia/ { gsub(/[<>]/,"") 
                print("[[" $2," ",$3, "]]")
                print("```julia <"$2" "$3">")
                print(slurp($2,$3))
                print("```")
                do
                  next
                while ($0 !~ /```$/) }
              { print }' $1
}
